<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>动态原型模式</title>
	</head>
	<body>
		<script>
			// 使用动态原型模式时，不能使用对象字面量重写原型。
			// 如果在已经创建了实例的情况下重写原型，那么就会切断现有实例与新原型之间的联系。
			
			function Person(name, age, job) {
				this.name = name;
				this.age = age;
				this.job = job;
				// 这段代码只会在初次调用构造函数时才会执行。此后，原型已经完成初始化，不需要再做
				// 什么修改了。
				if (typeof this.sayName != "function") {
					Person.prototype.sayName = function() {
						console.log(this.name);
					};
				}
			}
			
			var p1 = new Person("Nicholas", 29, "Software Engineer");
			console.log(p1);
			p1.sayName();
			console.log(p1 instanceof Person);
			console.log(p1.constructor == Person);
		</script>
	</body>
</html>
