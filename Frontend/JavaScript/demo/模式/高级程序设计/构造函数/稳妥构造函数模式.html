<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>稳妥构造函数模式</title>
	</head>
	<body>
		<script>
			// 稳妥构造函数遵循与寄生构造函数类似的模式，但有两点不同：
			// 一是新创建对象的实例方法不引用 this；
			// 二是不使用 new 操作符调用构造函数。
			
			function Person(name, age, job) {
				// 创建要返回的对象
				var o = new Object();
				
				// 可以在这里定义私有变量和函数
				
				// 添加方法
				o.sayName = function() {
					console.log(name);
				};
				
				// 返回对象
				return o;
			}
			
			// 注意，在以这种模式创建的对象中，除了使用 sayName()方法之外，没有其他办法访问 name 的值。
			var p1 = Person("Nicholas", 29, "Software Engineer");
			p1.sayName();
			
			//这样，变量 friend 中保存的是一个稳妥对象，而除了调用 sayName()方法外，没有别的方式可
			//以访问其数据成员。即使有其他代码会给这个对象添加方法或数据成员，但也不可能有别的办法访问传
			//入到构造函数中的原始数据。稳妥构造函数模式提供的这种安全性，使得它非常适合在某些安全执行环
			//境——例如，ADsafe（www.adsafe.org）和 Caja（http://code.google.com/p/google-caja/）提供的环境——
			//下使用。
			
			//**与寄生构造函数模式类似，使用稳妥构造函数模式创建的对象与构造函数之间也
			//**没有什么关系，因此 instanceof 操作符对这种对象也没有意义。
		</script>
	</body>
</html>
